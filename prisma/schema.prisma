generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id             String        @id
  firstName      String
  lastName       String
  email          String
  avatarUrl      String?
  organizationId Int?
  createdAt      DateTime      @default(now())
  roleId         Int?
  officeWorker   OfficeWorker?
  Property       Property[]
  Organization   Organization? @relation(fields: [organizationId], references: [id])
  Role           Role?         @relation(fields: [roleId], references: [id])
}

model Property {
  id               Int                      @id @default(autoincrement())
  name             String
  description      String
  price            Int
  discountedPrice  Int
  userId           String
  organizationId   Int?
  typeId           Int
  subTypeId        Int
  statusId         Int
  agentId          Int
  contractId       Int
  videoSource      String
  threeDSource     String
  deedStatusId     Int
  publishingStatus String                   @default("PENDING")
  createdAt        DateTime                 @default(now())
  updatedAt        DateTime                 @updatedAt
  descriptors      DescriptorsOnProperties?
  agent            OfficeWorker             @relation(fields: [agentId], references: [id])
  contract         PropertyContract         @relation(fields: [contractId], references: [id])
  deedStatus       PropertyDeedStatus       @relation(fields: [deedStatusId], references: [id])
  Organization     Organization?            @relation(fields: [organizationId], references: [id])
  status           PropertyStatus           @relation(fields: [statusId], references: [id])
  subType          PropertySubType          @relation(fields: [subTypeId], references: [id])
  type             PropertyType             @relation(fields: [typeId], references: [id])
  user             User                     @relation(fields: [userId], references: [id])
  feature          PropertyFeature?
  images           PropertyImage[]
  location         PropertyLocation?
}

model PropertyImage {
  id         Int      @id @default(autoincrement())
  url        String
  order      Int      @default(0)
  propertyId Int
  property   Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
}

model PropertyFeature {
  id              Int      @id @default(autoincrement())
  bedrooms        String
  bathrooms       Int
  floor           Int
  totalFloor      Int
  area            Int
  grossArea       Int
  zoningStatus    Boolean
  parcelNumber    Int
  blockNumber     Int
  hasSwimmingPool Boolean
  hasGardenYard   Boolean
  hasBalcony      Boolean
  propertyId      Int      @unique
  property        Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
}

model PropertyLocation {
  id            Int      @id @default(autoincrement())
  streetAddress String
  city          String
  state         String
  zip           String
  country       String
  landmark      String
  district      String
  neighborhood  String
  region        String
  latitude      Float
  longitude     Float
  propertyId    Int      @unique
  property      Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)
}

model PropertyType {
  id                   Int                          @id @default(autoincrement())
  value                String
  slug                 String
  organizationId       Int?
  Property             Property[]
  descriptorCategories PropertyDescriptorCategory[]
  subTypes             PropertySubType[]
  Organization         Organization?                @relation(fields: [organizationId], references: [id])
}

model PropertySubType {
  id             Int           @id @default(autoincrement())
  typeId         Int
  organizationId Int?
  value          String
  slug           String
  Property       Property[]
  Organization   Organization? @relation(fields: [organizationId], references: [id])
  type           PropertyType  @relation(fields: [typeId], references: [id])
}

model PropertyDescriptorCategory {
  id             Int                  @id @default(autoincrement())
  value          String
  slug           String
  typeId         Int
  organizationId Int?
  descriptors    PropertyDescriptor[]
  Organization   Organization?        @relation(fields: [organizationId], references: [id])
  type           PropertyType         @relation(fields: [typeId], references: [id])
}

model PropertyDescriptor {
  id             Int                        @id @default(autoincrement())
  categoryId     Int
  organizationId Int?
  value          String
  slug           String
  Properties     DescriptorsOnProperties[]
  category       PropertyDescriptorCategory @relation(fields: [categoryId], references: [id])
  Organization   Organization?              @relation(fields: [organizationId], references: [id])
}

model DescriptorsOnProperties {
  propertyId   Int                @unique
  descriptorId Int
  descriptor   PropertyDescriptor @relation(fields: [descriptorId], references: [id])
  property     Property           @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  @@id([propertyId, descriptorId])
}

model PropertyStatus {
  id             Int           @id @default(autoincrement())
  value          String
  slug           String
  organizationId Int?
  Property       Property[]
  Organization   Organization? @relation(fields: [organizationId], references: [id])
}

model PropertyDeedStatus {
  id             Int           @id @default(autoincrement())
  value          String
  slug           String
  organizationId Int?
  Property       Property[]
  Organization   Organization? @relation(fields: [organizationId], references: [id])
}

model PropertyContract {
  id             Int           @id @default(autoincrement())
  value          String
  slug           String
  organizationId Int?
  Property       Property[]
  Organization   Organization? @relation(fields: [organizationId], references: [id])
}

model City {
  city_id      Int        @id @default(autoincrement())
  city_name    String
  country_id   Int
  country_name String
  slug         String
  country      Country    @relation(fields: [country_id], references: [country_id])
  districts    District[]
  offices      Office[]
}

model Country {
  country_id   Int      @id @default(autoincrement())
  country_name String
  slug         String
  cities       City[]
  offices      Office[]
}

model Office {
  id                 Int            @id @default(autoincrement())
  name               String
  latitude           Float
  longitude          Float
  streetAddress      String
  cityId             Int
  zip                String
  countryId          Int
  districtId         Int
  neighborhoodId     Int
  organizationId     Int?
  avatarUrl          String?
  description        String
  email              String
  phone              String
  fax                String
  xAccountId         String
  facebookAccountId  String
  linkedInAccountId  String
  instagramAccountId String
  youtubeAccountId   String
  webUrl             String
  slug               String
  city               City           @relation(fields: [cityId], references: [city_id])
  country            Country        @relation(fields: [countryId], references: [country_id])
  district           District       @relation(fields: [districtId], references: [district_id])
  neighborhood       Neighborhood   @relation(fields: [neighborhoodId], references: [neighborhood_id])
  Organization       Organization?  @relation(fields: [organizationId], references: [id])
  images             OfficeImage[]
  workers            OfficeWorker[]
  projects           Project[]
}

model OfficeImage {
  id       Int    @id @default(autoincrement())
  url      String
  officeId Int
  office   Office @relation(fields: [officeId], references: [id])
}

model OfficeWorker {
  id                   Int                  @id @default(autoincrement())
  name                 String
  surname              String
  roleId               Int
  avatarUrl            String?
  about                String
  email                String
  phone                String
  xAccountId           String
  facebookAccountId    String
  linkedInAccountId    String
  instagramAccountId   String
  youtubeAccountId     String
  webUrl               String
  commercialDocumentId String
  companyLegalName     String
  officeId             Int
  slug                 String
  title                String?
  userId               String?              @unique
  office               Office               @relation(fields: [officeId], references: [id])
  role                 Role                 @relation(fields: [roleId], references: [id])
  user                 User?                @relation(fields: [userId], references: [id])
  reviews              OfficeWorkerReview[]
  properties           Property[]
}

model OfficeWorkerReview {
  id               Int           @id @default(autoincrement())
  review           String
  firstName        String
  lastName         String
  email            String
  phone            String
  score1           Int
  score2           Int
  score3           Int
  score4           Int
  score5           Int
  score6           Int
  avg              Int
  officeWorkerId   Int
  organizationId   Int?
  isApproved       Int
  kvkkConsent      Int           @default(0)
  marketingConsent Int           @default(0)
  createdAt        DateTime      @default(now())
  officeWorker     OfficeWorker  @relation(fields: [officeWorkerId], references: [id])
  Organization     Organization? @relation(fields: [organizationId], references: [id])
}

model Role {
  id             Int            @id @default(autoincrement())
  title          String
  slug           String
  organizationId Int?
  officeWorker   OfficeWorker[]
  Organization   Organization?  @relation(fields: [organizationId], references: [id])
  User           User[]
}

model District {
  district_id   Int            @id @default(autoincrement())
  district_name String
  city_id       Int
  city_name     String
  slug          String
  city          City           @relation(fields: [city_id], references: [city_id])
  neighborhoods Neighborhood[]
  offices       Office[]
}

model Neighborhood {
  neighborhood_id   Int      @id @default(autoincrement())
  neighborhood_name String
  city_id           Int
  city_name         String
  district_id       Int
  district_name     String
  slug              String
  district          District @relation(fields: [district_id], references: [district_id])
  offices           Office[]
}

model Project {
  id               Int                     @id @default(autoincrement())
  name             String
  description      String
  officeId         Int
  organizationId   Int?
  assignedAgents   String
  publishingStatus String
  startDate        DateTime
  endDate          DateTime
  deedInfo         String
  landArea         String
  nOfUnits         String
  catalogUrl       String?
  slug             String
  createdAt        DateTime                @default(now())
  updatedAt        DateTime                @default(now()) @updatedAt
  office           Office                  @relation(fields: [officeId], references: [id])
  Organization     Organization?           @relation(fields: [organizationId], references: [id])
  feature          ProjectFeature?
  images           ProjectImage[]
  location         ProjectLocation?
  socialFeatures   ProjectSocialFeatures[]
  unitSizes        ProjectUnitSize[]
}

model ProjectLocation {
  id            Int      @id @default(autoincrement())
  streetAddress String
  city          String
  state         String
  zip           String
  country       String
  landmark      String?
  district      String
  neighborhood  String
  latitude      Float?
  longitude     Float?
  projectId     Int      @unique
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  project       Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProjectFeature {
  id              Int     @id @default(autoincrement())
  bedrooms        Int
  bathrooms       Int
  floor           Int
  totalFloor      Int
  area            Int
  hasSwimmingPool Boolean
  hasGardenYard   Boolean
  hasBalcony      Boolean
  projectId       Int     @unique
  project         Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProjectUnitSize {
  id        Int     @id @default(autoincrement())
  value     String
  projectId Int
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProjectSocialFeatures {
  id        Int     @id @default(autoincrement())
  value     String
  projectId Int
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProjectImage {
  id        Int     @id @default(autoincrement())
  url       String
  order     Int     @default(0)
  projectId Int
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model ProspectAgent {
  id               Int           @id @default(autoincrement())
  firstName        String
  lastName         String
  email            String
  phone            String
  city             String
  district         String
  educationLevel   String
  occupation       String
  organizationId   Int?
  kvkkConsent      Int           @default(0)
  marketingConsent Int           @default(0)
  createdAt        DateTime      @default(now())
  Organization     Organization? @relation(fields: [organizationId], references: [id])
}

model ProspectCustomer {
  id               Int           @id @default(autoincrement())
  firstName        String
  lastName         String
  email            String
  phone            String
  city             String
  district         String
  streetAddress    String
  contractType     String
  propertyType     String
  notes            String
  organizationId   Int?
  kvkkConsent      Int           @default(0)
  marketingConsent Int           @default(0)
  createdAt        DateTime      @default(now())
  Organization     Organization? @relation(fields: [organizationId], references: [id])
}

model ContactRequest {
  id             String        @id @default(cuid())
  firstName      String
  lastName       String
  phone          String
  officeId       String
  message        String
  organizationId Int?
  status         String        @default("PENDING")
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  Organization   Organization? @relation(fields: [organizationId], references: [id])
}

model Contents {
  id             Int           @id @default(autoincrement())
  key            String        @unique
  value          String
  description    String?
  organizationId Int?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  Organization   Organization? @relation(fields: [organizationId], references: [id])
}

model Organization {
  id                         Int                          @id @default(autoincrement())
  name                       String
  slug                       String                       @unique
  description                String?
  createdAt                  DateTime                     @default(now())
  updatedAt                  DateTime
  ContactRequest             ContactRequest[]
  Contents                   Contents[]
  Office                     Office[]
  OfficeWorkerReview         OfficeWorkerReview[]
  Project                    Project[]
  Property                   Property[]
  PropertyContract           PropertyContract[]
  PropertyDeedStatus         PropertyDeedStatus[]
  PropertyDescriptor         PropertyDescriptor[]
  PropertyDescriptorCategory PropertyDescriptorCategory[]
  PropertyStatus             PropertyStatus[]
  PropertySubType            PropertySubType[]
  PropertyType               PropertyType[]
  ProspectAgent              ProspectAgent[]
  ProspectCustomer           ProspectCustomer[]
  Role                       Role[]
  User                       User[]
}

model activity_log {
  id         Int       @id @default(autoincrement())
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  note       String?
}
